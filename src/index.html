<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; img-src 'self' file: data:;"
    />
    <title>spotlight</title>

    <!-- 基础样式 -->
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/components.css" />

    <!-- 主题样式 -->
    <link rel="stylesheet" href="css/themes/material-light.css" />
    <link rel="stylesheet" href="css/themes/material-dark.css" />
    <link rel="stylesheet" href="css/themes/fluent-light.css" />
    <link rel="stylesheet" href="css/themes/fluent-dark.css" />
    <link rel="stylesheet" href="css/themes/apple-light.css" />
    <link rel="stylesheet" href="css/themes/apple-dark.css" />
    <link rel="stylesheet" href="css/themes/flat-light.css" />
    <link rel="stylesheet" href="css/themes/flat-dark.css" />
    <link rel="stylesheet" href="css/themes/neumorphism-light.css" />
    <link rel="stylesheet" href="css/themes/neumorphism-dark.css" />
    <link rel="stylesheet" href="css/themes/glassmorphism-light.css" />
    <link rel="stylesheet" href="css/themes/glassmorphism-dark.css" />
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  </head>
  <body class="theme-fluent-light mode-light">
    <!-- 密码保护遮罩 -->
    <div id="password-overlay" class="password-overlay hidden">
      <div class="password-box">
        <h2 data-i18n="password.title">请输入密码</h2>
        <input
          type="password"
          id="password-input"
          data-i18n-placeholder="password.placeholder"
          placeholder="密码"
        />
        <div id="password-error" class="password-error hidden"></div>
        <button class="btn btn-primary w-full" onclick="app.checkPassword()">
          <span data-i18n="password.submit">确定</span>
        </button>
        <button id="password-cancel" class="btn btn-ghost w-full mt-sm hidden" onclick="app.cancelPassword()">
          <span data-i18n="common.cancel">取消</span>
        </button>
      </div>
    </div>

    <!-- 主容器 -->
    <div class="app-container">
      <!-- 侧边栏 -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-logo" data-i18n="app.name">智能点名助手</div>
        </div>

        <!-- 导航菜单 -->
        <nav class="sidebar-nav">
          <div
            class="nav-item active"
            data-page="home"
            onclick="app.showPage('home')"
          >
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            <span data-i18n="nav.home">首页</span>
          </div>
          <div
            class="nav-item"
            data-page="classes"
            onclick="app.showPage('classes')"
          >
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
            <span data-i18n="nav.classes">班级管理</span>
          </div>
          <div
            class="nav-item"
            data-page="students"
            onclick="app.showPage('students')"
          >
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
            <span data-i18n="nav.students">学生管理</span>
          </div>
          <div
            class="nav-item"
            data-page="history"
            onclick="app.showPage('history')"
          >
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
            <span data-i18n="nav.history">历史记录</span>
          </div>
          <div
            class="nav-item"
            data-page="stats"
            onclick="app.showPage('stats')"
          >
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
            <span data-i18n="nav.stats">统计</span>
          </div>
          <div
            class="nav-item"
            data-page="leaderboard"
            onclick="app.showPage('leaderboard')"
          >
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg>
            <span>积分排行</span>
          </div>
          <div
            class="nav-item"
            data-page="settings"
            onclick="app.showPage('settings')"
          >
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
            <span data-i18n="nav.settings">设置</span>
          </div>
          <div
            class="nav-item"
            data-page="about"
            onclick="app.showPage('about')"
          >
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            <span data-i18n="nav.about">关于</span>
          </div>
        </nav>
        
        <!-- 侧边栏折叠按钮 -->
        <div class="sidebar-collapse-btn" onclick="app.toggleSidebar()" title="折叠侧边栏">
          <svg class="collapse-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="11 17 6 12 11 7"></polyline>
            <polyline points="18 17 13 12 18 7"></polyline>
          </svg>
        </div>
      </aside>

      <!-- 主内容区 -->
      <main class="main-content">
        <!-- ==================== 首页 ==================== -->
        <div id="page-home" class="page active">
          <header class="content-header">
            <h1 class="content-title" data-i18n="nav.home">首页</h1>
            <div class="header-actions">
            <div class="header-actions">
              <div class="custom-select-wrapper custom-class-select-container" style="width: 200px;">
                <div class="custom-select">
                  <div class="custom-select-trigger">
                    <span class="custom-select-trigger-text" data-i18n="home.selectClass">请选择班级</span>
                  </div>
                  <div class="custom-options">
                    <!-- Javascript Populated -->
                  </div>
                </div>
              </div>
            </div>
            </div>
          </header>
          <div class="content-body">
            <div
              class="flex flex-col items-center justify-center h-full gap-lg"
            >
              <!-- 无班级提示 -->
              <div id="home-no-class" class="empty-state-card hidden">
                <div class="empty-state-icon-wrapper">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="80" height="80">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                    <line x1="12" y1="8" x2="12" y2="14"></line>
                    <line x1="9" y1="11" x2="15" y2="11"></line>
                  </svg>
                </div>
                <h2 class="empty-state-title">欢迎使用 Spotlight</h2>
                <p class="empty-state-desc">开始使用前，请先创建一个班级</p>
                <button class="btn btn-primary btn-lg" onclick="app.showPage('classes'); classManager.showModal()">
                  <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                  创建第一个班级
                </button>
              </div>

              <!-- 无学生提示 -->
              <div id="home-no-students" class="empty-state-card hidden">
                <div class="empty-state-icon-wrapper">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="80" height="80">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <line x1="19" y1="8" x2="19" y2="14"></line>
                    <line x1="16" y1="11" x2="22" y2="11"></line>
                  </svg>
                </div>
                <h2 class="empty-state-title">班级还没有学生</h2>
                <p class="empty-state-desc">添加学生后即可开始随机点名</p>
                <div class="flex gap-md">
                  <button class="btn btn-primary" onclick="app.showPage('students'); studentManager.showAddModal()">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    添加学生
                  </button>
                  <button class="btn btn-secondary" onclick="app.showPage('students'); studentManager.importFromFile()">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                    批量导入
                  </button>
                </div>
              </div>

              <!-- 抽取区域 (Stage Layout) -->
              <div id="home-pick-area" class="spotlight-stage">
                <!-- 核心按钮区 -->
                <div class="stage-center">
                  <div class="glow-ring"></div>
                  <button
                    id="pick-button"
                    class="pick-button-modern"
                    onclick="app.pick()"
                  >
                    <span class="btn-text" data-i18n="home.pickButton">START</span>
                    <span class="btn-subtext">Click to Pick</span>
                  </button>
                </div>

                <!-- 底部控制栏 -->
                <div class="stage-controls">
                  <!-- 人数计数器 (胶囊样式) -->
                  <div class="counter-pill">
                    <button
                      class="pill-btn"
                      onclick="app.decreasePickCount()"
                      title="Decrease"
                    >
                      <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    </button>
                    <div class="pill-display">
                      <span class="pill-label" data-i18n="home.pickCount">人数</span>
                      <span id="pick-count" class="pill-value">1</span>
                    </div>
                    <button
                      class="pill-btn"
                      onclick="app.increasePickCount()"
                      title="Increase"
                    >
                      <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    </button>
                  </div>

                </div>

                <div id="pick-result" class="pick-result-overlay hidden">
                  <button class="icon-btn-close" onclick="picker.resetResult()" title="Close">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                  </button>
                  <div class="result-content" id="result-content-area"></div>
                  
                  <div class="result-actions">
                    <button
                      class="btn-result-secondary"
                      onclick="picker.resetResult()"
                    >
                      <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                      <span data-i18n="common.close">关闭</span>
                    </button>
                    <button
                      id="pick-again-btn"
                      class="retry-btn"
                      onclick="app.pick()"
                    >
                      <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6"></path><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path></svg>
                      <span data-i18n="home.pickAgain">再抽一次</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ==================== 班级管理 ==================== -->
        <div id="page-classes" class="page">
          <header class="content-header">
            <h1 class="content-title" data-i18n="classes.title">班级管理</h1>
          </header>
          <div class="content-body">
            <div class="card">
              <div class="card-header flex justify-between items-center">
                <span data-i18n="classes.title">班级管理</span>
                <button
                  class="btn btn-primary btn-sm"
                  onclick="classManager.showAddModal()"
                >
                  <span>+</span>
                  <span data-i18n="classes.addClass">添加班级</span>
                </button>
              </div>
              <div class="card-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th data-i18n="classes.className">班级名称</th>
                      <th data-i18n="classes.studentCount">学生人数</th>
                      <th data-i18n="classes.actions">操作</th>
                    </tr>
                  </thead>
                  <tbody id="class-list"></tbody>
                </table>
                <div id="class-empty" class="empty-state hidden">
                  <div class="empty-state-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="64" height="64"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg></div>
                  <div class="empty-state-title" data-i18n="home.noClass">
                    暂无班级，请添加
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ==================== 学生管理 ==================== -->
        <div id="page-students" class="page">
          <header class="content-header">
            <h1 class="content-title" data-i18n="students.title">学生管理</h1>
            <div class="header-actions">
              <div class="custom-select-wrapper custom-class-select-container" style="width: 200px;">
                <div class="custom-select">
                  <div class="custom-select-trigger">
                    <span class="custom-select-trigger-text" data-i18n="home.selectClass">请选择班级</span>
                  </div>
                  <div class="custom-options">
                    <!-- Javascript Populated -->
                  </div>
                </div>
              </div>
            </div>
          </header>
          <div class="content-body">
            <div class="card">
              <div class="card-header flex justify-between items-center">
                <span data-i18n="students.title">学生管理</span>
                <div class="flex gap-sm">
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="studentManager.showImportTxtModal()"
                  >
                    <span data-i18n="students.importTxt">导入 TXT</span>
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="studentManager.importExcel()"
                  >
                    <span data-i18n="students.importExcel">导入 Excel</span>
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="studentManager.importPhotos()"
                  >
                    <span data-i18n="students.importPhotos">批量导入照片</span>
                  </button>
                  <button
                    class="btn btn-primary btn-sm"
                    onclick="studentManager.showAddModal()"
                  >
                    <span>+</span>
                    <span data-i18n="students.addStudent">添加学生</span>
                  </button>
                </div>
              </div>
              <div class="card-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th data-i18n="students.photo">照片</th>
                      <th data-i18n="students.studentName">姓名</th>
                      <th id="th-student-id" data-i18n="students.studentId">
                        学号
                      </th>
                      <th data-i18n="students.pickCount">抽中次数</th>
                      <th data-i18n="students.actions">操作</th>
                    </tr>
                  </thead>
                  <tbody id="student-list"></tbody>
                </table>
                <div id="student-empty" class="empty-state hidden">
                  <div class="empty-state-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="64" height="64"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line></svg></div>
                  <div class="empty-state-title" data-i18n="home.noStudents">
                    当前班级暂无学生
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ==================== 历史记录 ==================== -->
        <div id="page-history" class="page">
          <header class="content-header">
            <h1 class="content-title" data-i18n="history.title">历史记录</h1>
          </header>
          <div class="content-body">
            <div class="card">
              <div class="card-header flex justify-between items-center">
                <span data-i18n="history.title">历史记录</span>
                <div class="flex gap-sm">
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="historyManager.exportExcel()"
                  >
                    <span data-i18n="history.exportExcel">导出 Excel</span>
                  </button>
                  <button
                    class="btn btn-secondary btn-sm"
                    onclick="historyManager.exportTxt()"
                  >
                    <span data-i18n="history.exportTxt">导出 TXT</span>
                  </button>
                  <button
                    class="btn btn-danger btn-sm"
                    onclick="historyManager.clearHistory()"
                  >
                    <span data-i18n="history.clearHistory">清空历史</span>
                  </button>
                </div>
              </div>
              <div class="card-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th data-i18n="history.time">时间</th>
                      <th data-i18n="history.class">班级</th>
                      <th data-i18n="history.pickedStudents">抽中学生</th>
                    </tr>
                  </thead>
                  <tbody id="history-list"></tbody>
                </table>
                <div id="history-empty" class="empty-state hidden">
                  <div class="empty-state-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="64" height="64"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg></div>
                  <div class="empty-state-title" data-i18n="history.noRecords">
                    暂无历史记录
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ==================== 统计 ==================== -->
        <div id="page-stats" class="page">
          <header class="content-header">
            <h1 class="content-title" data-i18n="stats.title">抽中次数统计</h1>
            <div class="header-actions">
              <div class="custom-select-wrapper custom-class-select-container" style="width: 200px;">
                <div class="custom-select">
                  <div class="custom-select-trigger">
                    <span class="custom-select-trigger-text" data-i18n="home.selectClass">请选择班级</span>
                  </div>
                  <div class="custom-options">
                    <!-- Javascript Populated -->
                  </div>
                </div>
              </div>
            </div>
          </header>
          <div class="content-body">
            <!-- 图表卡片 -->
            <div class="card mb-lg">
              <div class="card-header">
                <span>抽中分布图</span>
              </div>
              <div class="card-body" style="height: 300px;">
                <canvas id="stats-chart"></canvas>
              </div>
            </div>

            <!-- 表格卡片 -->
            <div class="card">
              <div class="card-header">
                <span data-i18n="stats.title">抽中次数统计</span>
              </div>
              <div class="card-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th data-i18n="stats.rank">排名</th>
                      <th data-i18n="stats.studentName">姓名</th>
                      <th id="th-stats-id" data-i18n="stats.studentId">学号</th>
                      <th data-i18n="stats.pickCount">抽中次数</th>
                    </tr>
                  </thead>
                  <tbody id="stats-list"></tbody>
                </table>
                <div id="stats-empty" class="empty-state hidden">
                  <div class="empty-state-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="64" height="64"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg></div>
                  <div class="empty-state-title" data-i18n="stats.noData">
                    暂无统计数据
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ==================== 积分排行榜 ==================== -->
        <div id="page-leaderboard" class="page">
          <header class="content-header">
            <h1 class="content-title">积分排行榜</h1>
            <div class="header-actions">
              <div class="custom-select-wrapper custom-class-select-container" style="width: 200px;">
                <div class="custom-select">
                  <div class="custom-select-trigger">
                    <span class="custom-select-trigger-text" data-i18n="home.selectClass">请选择班级</span>
                  </div>
                  <div class="custom-options">
                    <!-- Javascript Populated -->
                  </div>
                </div>
              </div>
            </div>
          </header>
          <div class="content-body">
            <div class="card">
              <div class="card-header">
                <span>积分排名</span>
                <button class="btn btn-secondary btn-sm" onclick="leaderboard.exportScores()">
                  <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                  导出积分
                </button>
              </div>
              <div class="card-body">
                <table class="table">
                  <thead>
                    <tr>
                      <th style="width: 60px;">排名</th>
                      <th>姓名</th>
                      <th>学号</th>
                      <th style="width: 100px;">积分</th>
                      <th style="width: 120px;">操作</th>
                    </tr>
                  </thead>
                  <tbody id="leaderboard-list"></tbody>
                </table>
                <div id="leaderboard-empty" class="empty-state hidden">
                  <div class="empty-state-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="64" height="64"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg>
                  </div>
                  <div class="empty-state-title">
                    暂无积分数据
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ==================== 设置 ==================== -->
        <div id="page-settings" class="page">
          <header class="content-header">
            <h1 class="content-title" data-i18n="settings.title">设置</h1>
          </header>
          <div class="content-body">
            <!-- 主题设置 -->
            <div class="card mb-lg">
              <div class="card-header" data-i18n="settings.theme">主题设置</div>
              <div class="card-body">
                <div class="setting-section">
                  <div
                    class="setting-section-title"
                    data-i18n="settings.themeStyle"
                  >
                    UI 风格
                  </div>
                  <div class="theme-grid" id="theme-style-grid"></div>
                </div>

                <div class="setting-section mt-lg">
                  <div
                    class="setting-section-title"
                    data-i18n="settings.themeMode"
                  >
                    颜色模式
                  </div>
                  <div class="flex gap-sm">
                    <div class="row w-100">
                      <div class="col-12">
                        <div class="btn-group w-100" role="group">
                          <button class="btn btn-secondary flex-1" id="mode-light" onclick="settingsManager.setThemeMode('light')">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              <circle cx="12" cy="12" r="5"></circle>
                              <line x1="12" y1="1" x2="12" y2="3"></line>
                              <line x1="12" y1="21" x2="12" y2="23"></line>
                              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                              <line x1="1" y1="12" x2="3" y2="12"></line>
                              <line x1="21" y1="12" x2="23" y2="12"></line>
                              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                            <span data-i18n="settings.light">浅色</span>
                          </button>
                          <button class="btn btn-secondary flex-1" id="mode-dark" onclick="settingsManager.setThemeMode('dark')">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                            </svg>
                            <span data-i18n="settings.dark">深色</span>
                          </button>
                          <button class="btn btn-secondary flex-1" id="mode-auto" onclick="settingsManager.setThemeMode('auto')">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                              <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                              <line x1="8" y1="21" x2="16" y2="21"></line>
                              <line x1="12" y1="17" x2="12" y2="21"></line>
                            </svg>
                            <span data-i18n="settings.auto">跟随系统</span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 语言设置 -->
            <div class="card mb-lg">
              <div class="card-header" data-i18n="settings.language">语言</div>
              <div class="card-body">
                <select
                  class="select"
                  id="language-select"
                  onchange="settingsManager.setLanguage(this.value)"
                  style="max-width: 200px"
                >
                  <option value="zh-CN">中文</option>
                  <option value="en-US">English</option>
                </select>
              </div>
            </div>

            <!-- 显示设置 -->
            <div class="card mb-lg">
              <div class="card-header" data-i18n="settings.display">
                显示设置
              </div>
              <div class="card-body">
                <div class="setting-item">
                  <div>
                    <div
                      class="setting-label"
                      data-i18n="settings.showStudentId"
                    >
                      显示学号
                    </div>
                  </div>
                  <div
                    class="switch"
                    id="switch-show-id"
                    onclick="settingsManager.toggleShowStudentId()"
                  ></div>
                </div>
                <div class="setting-item">
                  <div>
                    <div class="setting-label" data-i18n="settings.photoMode">
                      显示照片
                    </div>
                  </div>
                  <div
                    class="switch"
                    id="switch-photo-mode"
                    onclick="settingsManager.togglePhotoMode()"
                  ></div>
                </div>
                <div class="setting-item">
                  <div>
                    <div class="setting-label" data-i18n="settings.soundEffects">
                      音效开关
                    </div>
                  </div>
                  <div
                    class="switch"
                    id="switch-sound-effects"
                    onclick="settingsManager.toggleSoundEffects()"
                  ></div>
                </div>
                


                <div class="setting-item">
                  <div>
                    <div class="setting-label">
                      开机自启动
                    </div>
                    <div class="setting-hint" style="font-size: 12px; color: var(--text-tertiary);">
                      系统启动时自动运行应用
                    </div>
                  </div>
                  <div
                    class="switch"
                    id="switch-auto-launch"
                    onclick="settingsManager.toggleAutoLaunch()"
                  ></div>
                </div>
                <div class="setting-item">
                  <div>
                    <div class="setting-label">
                      抽取动画
                    </div>
                    <div class="setting-hint" style="font-size: 12px; color: var(--text-tertiary);">
                      选择抽取时的动画效果
                    </div>
                  </div>
                  <select class="input" id="animation-style-select" onchange="settingsManager.setAnimationStyle(this.value)" style="width: 140px;">
                    <option value="scroll">滚动</option>
                    <option value="wheel">转盘</option>
                    <option value="flip">卡片翻转</option>
                    <option value="slot">老虎机</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- 快捷键设置 -->
            <div class="card mb-lg">
              <div class="card-header" data-i18n="settings.shortcuts">
                快捷键设置
              </div>
              <div class="card-body">
                <div class="setting-item">
                  <div>
                    <div
                      class="setting-label"
                      data-i18n="settings.pickShortcut"
                    >
                      抽取快捷键
                    </div>
                  </div>
                  <button
                    class="btn btn-secondary"
                    id="shortcut-pick"
                    onclick="settingsManager.captureShortcut('pick')"
                  >
                    Space
                  </button>
                </div>
              </div>
            </div>

            <!-- 公平性设置 -->
            <div class="card mb-lg">
              <div class="card-header">
                公平性设置
              </div>
              <div class="card-body">
                <div class="setting-item">
                  <div>
                    <div class="setting-label">
                      加权随机
                    </div>
                    <div class="setting-hint" style="font-size: 12px; color: var(--text-tertiary);">
                      被抽中次数少的学生概率更高
                    </div>
                  </div>
                  <div
                    class="switch"
                    id="switch-weighted-random"
                    onclick="settingsManager.toggleWeightedRandom()"
                  ></div>
                </div>
                <div class="setting-item">
                  <div>
                    <div class="setting-label">
                      冷却期
                    </div>
                    <div class="setting-hint" style="font-size: 12px; color: var(--text-tertiary);">
                      刚抽中的学生在接下来 N 次不参与
                    </div>
                  </div>
                  <div class="flex gap-sm items-center">
                    <input
                      type="number"
                      class="input"
                      id="cooldown-count"
                      min="0"
                      max="10"
                      value="0"
                      style="width: 80px; text-align: center;"
                      onchange="settingsManager.setCooldownCount(this.value)"
                    />
                    <span style="color: var(--text-secondary);">次</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- 安全设置 -->
            <div class="card mb-lg">
              <div class="card-header" data-i18n="settings.security">
                安全设置
              </div>
              <div class="card-body">
                <div class="setting-item">
                  <div>
                    <div class="setting-label" data-i18n="settings.password">
                      密码保护
                    </div>
                  </div>
                  <div class="flex gap-sm">
                    <button
                      class="btn btn-secondary btn-sm"
                      id="btn-set-password"
                      onclick="settingsManager.showPasswordModal()"
                    >
                      <span data-i18n="settings.setPassword">设置密码</span>
                    </button>
                    <button
                      class="btn btn-danger btn-sm hidden"
                      id="btn-remove-password"
                      onclick="settingsManager.removePassword()"
                    >
                      <span data-i18n="settings.removePassword">移除密码</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- 数据管理 -->
            <div class="card">
              <div class="card-header" data-i18n="settings.data">数据管理</div>
              <div class="card-body">
                <div class="flex gap-sm">
                  <button
                    class="btn btn-secondary"
                    onclick="backupManager.backup()"
                  >
                    <span data-i18n="settings.backup">备份数据</span>
                  </button>
                  <button
                    class="btn btn-secondary"
                    onclick="backupManager.restore()"
                  >
                    <span data-i18n="settings.restore">恢复数据</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ==================== 关于 ==================== -->
        <div id="page-about" class="page">
          <header class="content-header">
            <h1 class="content-title" data-i18n="nav.about">关于</h1>
          </header>
          <div class="content-body">
            <div class="card about-card">
              <div class="card-body flex flex-col items-center py-xl">
                <div class="about-logo mb-lg">
                  <img src="../icon.png" alt="Spotlight Logo" width="100" height="100" style="border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.15);">
                </div>
                <h2 class="about-app-name" style="font-size: 2rem; font-weight: 700; margin-bottom: 0.25rem;">Spotlight</h2>
                <p class="about-version text-tertiary" style="margin-bottom: 0.5rem;">Version 1.0.3</p>
                <p class="about-developer" style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                  <span style="opacity: 0.7;">Developed by</span> <strong>BeiChen-CN</strong>
                </p>
                
                <div class="about-description text-center max-w-md mb-xl" data-i18n="about.description" style="color: var(--text-secondary); line-height: 1.6;">
                  一款功能强大、界面美观的桌面端课堂随机点名工具，专为教师设计。
                </div>

                <div class="about-links flex gap-md mb-xl">
                  <button class="github-btn" onclick="app.openExternal('https://github.com/BeiChen-CN/spotlight')" style="
                    display: inline-flex;
                    align-items: center;
                    gap: 10px;
                    padding: 12px 24px;
                    background: linear-gradient(135deg, #24292e 0%, #1b1f23 100%);
                    color: #fff;
                    border: none;
                    border-radius: 12px;
                    font-size: 15px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    box-shadow: 0 4px 14px rgba(0,0,0,0.25);
                  " onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 20px rgba(0,0,0,0.35)'" onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='0 4px 14px rgba(0,0,0,0.25)'">
                    <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                    View on GitHub
                  </button>
                </div>

                <div class="about-copyright text-tertiary text-sm" style="opacity: 0.6;">
                  &copy; 2026 BeiChen. Released under the MIT License.
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- ==================== 模态框 ==================== -->

    <!-- 通用模态框 -->
    <div id="modal-overlay" class="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h3 class="modal-title" id="modal-title">标题</h3>
          <button class="modal-close" onclick="app.closeModal()">
            &times;
          </button>
        </div>
        <div class="modal-body" id="modal-body"></div>
        <div class="modal-footer" id="modal-footer"></div>
      </div>
    </div>

    <!-- Toast 容器 -->
    <div id="toast-container" class="toast-container"></div>

    <!-- 脚本 -->
    <script src="js/constants.js"></script>
    <script src="js/virtual-scroll.js"></script>
    <script src="js/store.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/sound-manager.js"></script>

    <script src="js/class-manager.js"></script>
    <script src="js/student-manager.js"></script>
    <script src="js/picker.js"></script>
    <script src="js/history.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/backup.js"></script>
    <script src="js/leaderboard.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
